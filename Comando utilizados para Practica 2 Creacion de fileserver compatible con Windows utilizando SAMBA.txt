#Servidor Samba

# 1. Actualizar y limpiar paquetes
sudo apt clean
sudo apt update
sudo apt --fix-broken install

# 2. Instalar Samba (sin amarrar versiones, salvo que haya conflicto)
sudo apt install samba -y

# 3. Crear carpeta compartida
sudo mkdir -p /srv/samba/OS3
for i in $(seq 1 100); do echo "Archivo $i" > /srv/samba/Adrian$i.txt; done

# 4. Crear grupo y usuario de Samba
sudo groupadd sambagrupo
sudo useradd -M -s /sbin/nologin -G sambagrupo adrianuser
sudo smbpasswd -a adrianuser

# 5. Dar permisos a carpeta
sudo chown -R adrianuser:sambagrupo /srv/samba/OS3
sudo chmod -R 770 /srv/samba/OS3

# 6. Configurar Samba
sudo nano /etc/samba/smb.conf
# Agregar al final:
[OS3]
   path = /srv/samba/OS3
   writable = yes
   browseable = yes
   valid users = adrianuser
   force group = sambagrupo
   create mask = 0660
   directory mask = 0770
   read only = no
   guest ok = no

# 7. Validar configuración
testparm

# 8. Iniciar y habilitar servicio
sudo systemctl enable --now smbd nmbd

# 9. Abrir firewall (si aplica)
sudo ufw allow samba



#Cliente Windows

#1-Abrir Explorador de archivos → botón derecho en Este equipo → Conectar a unidad de red.

#2-Seleccionar letra de unidad (ej. Z:).

#3-En Carpeta escribir:

\\10.0.0.45\OS3

#4-Marcar Conectar de nuevo al iniciar sesión.

#5-Ingresar usuario y contraseña:

#Usuario: adrianuser
#Contraseña: (la que pusiste en smbpasswd)

#6-Validar que ves los 100 archivos.

#7-Abrir Adrian99.txt, agregar:  el zumzum de la carabela

#Guardar y comprobar desde Linux:

cat /srv/samba/OS3/Adrian99.txt



#Buenas prácticas

#Deshabilitar guest ok para evitar acceso no autorizado.

#Usar read only = no explícito para mayor claridad.

#En Windows, si no se conecta, ejecutar cmd como administrador y limpiar caché de credenciales: 
net use * /delete /y

#Mantener Samba actualizado:
sudo apt update && sudo apt upgrade samba -y



